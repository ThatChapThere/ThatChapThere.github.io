<!DOCTYPE html>
<HTML>
	<HEAD>
        <LINK type="image/png" href="dinosaur.png" rel="icon"></LINK>
        <STYLE type="text/css">
BUTTON{
    background-color:#990000;
    color:#77FFFF;
}
body{
    background-color:#00FF00;
    color:#000000;
}
H1{
    color:#FF0000;
}
        </STYLE>
        <TITLE>
            dino.com
        </TITLE>
	</HEAD>
    <BODY>
        <H1>
            dinosaur game
        </H1>
        <P id="energyThing"></P>
        <P id="ageThing"></P>
        <SCRIPT type="text/javascript">
function onlyPositive(num) {
    if(num <= 0){
        return(1);
    }else{
        return(num);
    }
}

function getNumber(string){
    var input=NaN;
    while(isNaN(input) || !input) {
        input=prompt(string+' (must be a number)');
    }
    return(input);
};

function Dinosaur(name, power, agility, roar, speed, currentAge, carnivorous) {
    this.name = name;
    var total = agility + roar + speed;
    this.agility = (agility / total) * power;
    this.roar = (roar / total) * power;
    this.speed = (speed / total) * power;
    this.energy = power + (currentAge * 10);
    this.age = currentAge + 1;
    this.carnivorous = carnivorous;
    if (currentAge) {
        this.ageString = currentAge + ' years old.';
    } else {
        this.AgeString = 'an egg.';
    }
    if (carnivorous) {
        this.attacking = true;
    } else {
        this.attacking = false;
    }
};
function getItemByProperty(array, lookingFor, propertyName) {
    for (var i = 0; i < array.length; i++) {
        if (array[i][propertyName] === lookingFor) {
            return (array[i]);
        }
    }
}
var dinosaurs = [
    new Dinosaur('tree', 1, 1, 0, 0, 99, false),
    new Dinosaur('randomosaurus', (Math.random() * 100) + 50, Math.random(), Math.random(), Math.random(), 100, Math.round(Math.random())),
    new Dinosaur('rock', 1000000, 1, 0, 0, 1000000, false),
    new Dinosaur('incisivosaurus', 75, 1, 3, 12, 0, false),
    new Dinosaur('caudipteryx', 65, 1, 0, 20, 0, false),
    new Dinosaur('eoraptor', 65, 20, 15, 20, 0, true),
    new Dinosaur('staurikosaurus', 70, 20, 7, 20, 0, true),
    new Dinosaur('apatosaurus', 200, 20, 10, 1, 100, false),
    new Dinosaur('diplodocus', 210, 30, 10, 1000, false),
    new Dinosaur('peloneustes', 100, 2, 0, 8, 0, true),
    new Dinosaur('megalosaurus', 100, 3, 3, 2, 0, true),
    new Dinosaur('hypsylophodon', 80, 2, 1, 10, 0, false),
    new Dinosaur('baryonyx', 130, 10, 3, 7, 0, true),
    new Dinosaur('microraptor', 160, 0.8, 0.3, 100, 0, true),
    new Dinosaur('polacanthus', 90, 100, 1, 3, 0, false),
    new Dinosaur('psittacosaurus', 60, 27, 4, 100, 0, false),
    new Dinosaur('mantellisaurus', 92, 10, 3, 30, 0, false),
    new Dinosaur('leaellynasaura', 50, 2, 1, 100, 0, false),
    new Dinosaur('confuciusornis', 130, 2, 1, 100, 0, false),
    new Dinosaur('ouranosaurus', 100, 50, 10, 70, 0, false),
    new Dinosaur('deinonychus', 1000, 100, 1, 3, 0, true),
    new Dinosaur('muttaburrasaurus', 106, 1, 1, 1, 0, false),
    new Dinosaur('nigersaurus', 120, 10, 9, 500, 0, false),
    new Dinosaur('spinosaurus', 140, 10, 3, 7, 0, true),
    new Dinosaur('irritator', 110, 10, 7, 3, 0, true),
    new Dinosaur('argentinosaurus', 140, 10, 2, 1, 100, false),
    new Dinosaur('nodosaurus', 100, 100, 7, 4, 0, false),
    new Dinosaur('megaraptor', 100, 100, 26, 66, 0, true),
    new Dinosaur('giganotosaurus', 141, 10, 10, 7, 0, true),
    new Dinosaur('hadrosaurus', 90, 10, 10, 20, 0, false),
    new Dinosaur('pteranodon', 1000, 10, 1, 1000, 0, true),
    new Dinosaur('corythosaurus', 88, 10, 2, 10, 0, false),
    new Dinosaur('saltasaurus', 100, 10, 2, 3, 70, false),
    new Dinosaur('ceratosaurus', 102, 10, 4, 4, 0, true),
    new Dinosaur('allosaurus', 120, 10, 8, 6, 0, true),
    new Dinosaur('kentrosaurus', 1000, 1000, 2, 3, 40, false),
    new Dinosaur('brachiosaurus', 100, 10, 2, 3, 80, false),
    new Dinosaur('hylaeosaurus', 100, 100, 2, 3, 60, false),
    new Dinosaur('pteradaustro', 1090, 2, 2, 10000, 20, true),
    new Dinosaur('liopleurodon', 100, 1, 0, 1, 50, true),
    new Dinosaur('sordes', 90, 1, 2, 150, 0, true),
    new Dinosaur('compsognathus', 30, 10, 8, 6, 0, true),
    new Dinosaur('archeopteryx', 90, 2, 1, 37, 1, false),
    new Dinosaur('ichthyosaurus', 99, 1, 0, 1, 7, true),
    new Dinosaur('shunosaurus', 110, 24, 1, 1, 71, false),
    new Dinosaur('pelorosaurus', 129, 10, 3, 3, 81, false),
    new Dinosaur('iguanodon', 80, 10, 4,5, 10, false),
    new Dinosaur('dilophosaurus', 80, 10, 8, 10, 8, true),
    new Dinosaur('cryolophosaurus', 90, 10, 8, 7, 10, true),
    new Dinosaur('scelidosaurus', 90, 100, 8, 10, 11, false),
    new Dinosaur('heterodontosaurus', 46.5, 2, 0, 30, 6, false),
    new Dinosaur('parasaurolophus',66,3,31,20,45,false),
    new Dinosaur('pentaceratops',100,50,4,12,10,false),
    new Dinosaur('monoclonius',69,50,4,12,11,false),
    new Dinosaur('stegoceras',81,50,2,15,12,false),
    new Dinosaur('maiasaura',60,3,2,3,36,false),
    new Dinosaur('protoceratops',50,3,1,3,6,false),
    new Dinosaur('euoplocephalus',150,100,10,13,45,false),
    new Dinosaur('panoplosaurus',63,100,10,13,38,false),
];
var otherDino;
function meet(dino) {
    otherDino = dinosaurs[Math.floor(Math.random()*dinosaurs.length)];
    var running = confirm('You meet a ' + otherDino['name'] + ' run?');
    if (running) {
        action = 'run';
    } else if (confirm('Attack?')) {
        action = 'attack';
    } else {
        alert("Okay, you'll just have to roar!");
        action = 'roar';
    }
    if(action === 'run') {
            if (otherDino.carnivorous) {
                if (otherDino['speed'] > dino.speed) {
                    alert('You got caught! You lose energy.');
                    dino.energy -= otherDino.speed - dino.speed;
                } else {
                    alert('You get away!');
                    dino.age += 1;
                    dino.energy += 10;
                }
            } else {
                alert('You get away!');
                dino.age += 1;
                dino.energy += 1;
            }
    }else if(action === 'roar'){
            if(dino.roar>otherDino.roar){
                alert('The '+otherDino.name+' was scared away.');
                dino.energy += 10;
                dino.age += 1;
            }else{
                alert('The '+otherDino.name+' was unnaffected - you lose energy.');
                dino.energy -= otherDino.roar - dino.roar;
                dino.age += 1;
            }
    }else{
        if(dino.agility>otherDino.agility){
            alert('The '+otherDino.name+' is toast.');
            dino.energy += 10;
            dino.age += 1;
        }else{
            alert('The '+otherDino.name+' is too powerfull-you lose.');
            dino.energy -= otherDino.agility - dino.agility;
            dino.age += 1;
        }
    }
    return(dino);
}
var userDino={};
var isNotMadeUp = confirm('Choose a dinosaur? (Click cancel to make one up.)');
var buttons = new Array;
if (isNotMadeUp) {
    for (var i = 0; i < dinosaurs.length; i++) {
        if(dinosaurs[i]['name'] !== 'rock') {
            var button = document.createElement('button');
            var j = i;
            button.textContent = dinosaurs[i]['name'];
            button.onclick = function () {
                userDino = getItemByProperty(dinosaurs, this.textContent, 'name');
                alert('you chose ' + this.textContent);
                var score = 1;
                while (userDino.energy > 0 && userDino.age < 110) {
                    userDino = meet(userDino);
                    score++;
                    ageThing.textContent = 'Your dinosaur is '+userDino.age+' years old.';
                    energyThing.textContent = 'Your dinosaur has '+Math.round(userDino.energy)+' energy.';
                }
                alert('GAME OVER. You lose. your score: ' + Math.round(score*userDino.age*onlyPositive(userDino.energy)));
                energyThing.textContent=energyThing.textContent+'\nscore: ' + Math.round(score*userDino.age*onlyPositive(userDino.energy));
        };
        }
        buttons.push(button);
        document.body.appendChild(buttons[i]);
    }
}else{
    var name=prompt('What is your Dinosaur called?');
    var agility=getNumber('How agile is you dinosaur?');
    var roar=getNumber('How loud can your dinosaur roar?');
    var speed=getNumber('How fast can your dinosaur run?');
    var isCarnivorous=confirm('Fancy some meat?');
    userDino = new Dinosaur(name,100,agility,roar,speed,1,isCarnivorous);
        var score = 1;
        while (userDino.energy > 0 && userDino.age < 110) {
            userDino = meet(userDino);
            score++;
            ageThing.textContent = 'Your dinosaur is '+userDino.age+' years old.';
            energyThing.textContent = 'Your dinosaur has '+Math.round(userDino.energy)+' energy.';
        }
        alert('GAME OVER. You lose. your score: ' + Math.round(score*userDino.age*onlyPositive(userDino.energy)));
        energyThing.textContent=energyThing.textContent+'\nscore: ' + Math.round(score*userDino.age*onlyPositive(userDino.energy));
}
        </SCRIPT>
        <HR>
        <P>
            &copy <A href="flobit.html" style="color:#990000">flob</A>group.corp
        </P>
    </BODY>
</HTML>
